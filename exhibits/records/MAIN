MAIN
C 
C  GRAPHICAL PROGRAMMING LANGUAGE 
C  AN EXPERIMENT IN GRAPHICAL CONTROL STRUCTURES
C  HOWARD CUNNINGHAM, OCTOBER 1976
C 
C  CODING CONVENTIONS 
C  ------------------ 
C 
C        ALL INTEGER VARIABLES WILL BE PREFIXED WITH I THROUGN N. 
C     THESE PREFIXES ARE FURTHER SUBDIVIDED AS FOLLOWS: 
C 
C        I - INDEX INTO DATA BASE 
C        J - FORMAL PARAMETER 
C        K - CONSTANT 
C        L - ARRAY
C        M - MAXIMUM BOUND
C        N - INTEGER NUMBER 
C 
C        STATEMENT NUMBERS WILL BE ASSIGNED IN ASSENDING
C     ORDER.  AN INCREMENT IN THE HUNDREDS PLACE WILL 
C     INDICATE A NEW FUNCTIONAL BLOCK.
C 
C        A COMMON BLOCK WILL BE DEFINED IDENTICALLY IN ALL
C     ROUTINES IN WHICH IT IS USED. 
C 
C  LIBRARY ROUTINES USED
C  ---------------------
C 
C     SETUP - INITIALIZE GRAPHICS PACKAGE 
C     BLANK - CLEAR SEGMENT 
C     MOUSE - READ MOUSE POSITION 
C     DELFIL - DELETE FILE ASSIGNED TO SPECIFIED UNIT 
C     IDAS - READ CHANNEL OF A TO D CONVERTER 
C     MOVE - MOVE (TRANSLATE) A DISPLAY SEGMENT 
C     DIM - ADJUST SEGMENT INTENSITY
C     MARK - RECORD SEGMENT STATUS
C     SEG - CREATE NEW SEGMENT
C     CIRCLE - PLOT CIRCLE
C     RESET - RESTORE SEGMENT TO SAVED STATE
C     APPEND - OPEN SEGMENT WITHOUT ERASE 
C     STRING - PLOT TEXT USING 'HARDWARE' CHARACTERS
C     INTSTY - ADJUST REMAINING SEGMENT INTENSITY 
C     KEYBRD - READ TERMINAL KEYBOARD 
C     KEYSET - READ FUNCTION KEYSET 
C     ASSIGN - CHANGE FILE NAME ASSIGNMENT FOR SPECIFIED UNIT 
C 
C  BUGS AND LIMITATIONS 
C  -------------------- 
C 
C        SHOULD INHIBIT TEXT ENTRY FOR OFF-PAGE NODES.
C 
C        CANNOT REMOVE LAST STATEMENT OF A CLAUSE.  SHOULD APPLY
C     TO SINGLE STATEMENT CLAUSES ONLY. 
C 
C        CONTRACT SAVES ONLY FIRST STATEMENT OF CLAUSE. 
C 
C        RECURSIVE ZOOM CAN MODIFY SAVED PROGRAM VOIDING
C     POINTERS ON THE STACK.
C 
C        POINTER RELOCATION REQUIRED TO KEEP STATEMENTS ACROSS
C     PROGRAM BOUNDRYS. 
C 
C        GENOUT WILL NOT GENERATE CONTINUATION CARDS WHEN 
C     COLUMN 72 IS EXCEEDED.  THIS CAN EASILY HAPPEN ON THE 
C     COMPUTED GOTO FOR A LARGE CASE STATEMENT. 
C 
C        SUBROUTINE SHARE SHOULD ALLOCATE LESS VERTICAL SPACE 
C     TO TYPE 1 STATEMENTS THAN OTHERS. 
C 
C  PROGRAM ERROR HALTS
C  -------------------
C 
C     1 - COUNT, CIRCULAR LINKS 
C     2 - SETALL, CIRCULAR LINKS
C     3 - SHARE, COUNT ZERO OR WRONG
C     4 - FORM, MISSING TERMINATOR
C     5 - PUSH, STACK OVERFLOW
C     6 - PULL, STACK UNDERFLOW 
C     7 - DRAW, LINK TO NON-ALLOCATED NODE
C     10 - FORM, IMPROPER BOUNDS
C     11 - ALLOC, NO FREE SEGMENTS
C     12 - FREE, RETURN OF NON-ALLOCATED SEGMENT
C     16 - NEWNOD, NO FREE NODES
C     17 - INCMND, CIRCULAR LINKS 
C     20 - FRENOD, FREE OF UNALLOCATED NODE 
C     21 - REFREP, NO REFERENCE TO NODE 
C     22 - LOADER, INPUT RANGE ERROR
C     23 - LOADER, TOO MUCH DATA
C     24 - RENAME, NAME SIZE ERROR
C     25 - LOADER, NO ROOT
C     26 - REFREP, COMPOUNDING BROTHER LINKS
C     28 - GENOUT, EMPTY OUTPUT LINE
C     29 - ZOOM, STACK REFERENCE TO NON-ALLOCATED NODE. 
C 
*CALL,DATA
*CALL,FILE
C 
      CALL SETUP
      CALL PUSH(0)
      CALL RENAME(LFN,NFN)
      CALL LOADER 
      CALL ALLOC(NRT) 
      CALL DIM(NRT,8) 
      CALL NPLOT(KXM,KYM,3) 
      CALL NPLOT(KXM,KYX,2) 
      CALL NPLOT(KXX,KYX,2) 
      IRD=IRT 
      LXM(IRD)=KXM
      LYM(IRD)=KYM
      LXX(IRD)=KXX
      LYX(IRD)=KYX
      CALL DRAW(IRD)
2     CALL TRACKR 
      CALL INZOOM 
      CALL INTEXT 
      CALL INCMND 
      GOTO 2
      END 
